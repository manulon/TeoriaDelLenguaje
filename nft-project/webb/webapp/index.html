<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <meta charset="utf-8">
  <title>Vinylmations</title>
</head>

<body>
  <div class="jumbotron">
    <h1 class="display-4">Shop Now!</h1>
    <p class="lead">Sitio para comprar e intercambiar tus vinylmations</p>
    <hr class="my-4">
    <p>Cumpla las condiciones requeridas</p>
    <a class="btn btn-primary btn-lg" href="#" role="button">Leer condiciones</a>
  </div>

  <div class="jumbotron">
    <h1 class="display-4">FUN</h1>
    <p class="lead">Conseguí FUNs gratuitamente para comprar Vinylmations - solo pagas gas!</p>
    <hr class="my-4">
    <p>Ingrese los datos solicitados</p>
    <div class="form-group">
      <input type="text" class="form-control" id="getFunPrivateKey" placeholder="Private Key">
    </div>
    <button class="btn btn-secondary" onclick="getFun()">GET FUN</button>
  </div>

  <div class="jumbotron">
    <h1 class="display-4">Vinylmations</h1>
    <p class="lead">Comprá tus vinylmations</p>
    <hr class="my-4">
    <p>Pasos a seguir: </p>
    <p>Pagá el Vinylmation</p>
    <div class="form-group">
      <input type="text" class="form-control" id="approveAddress" placeholder="Dirección del contrato dueño de los vinylmations">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" id="amountToApprove" placeholder="Precio del vinylmation en FUN">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" id="privateKeyToApprove" placeholder="Tu clave privada">
    </div>
    <button class="btn btn-secondary" onclick="approveFun()">PAGAR</button>
    <br>
    <br>
    <p>Retira tu vinylmation!</p>
    <div class="form-group">
      <input type="text" class="form-control" id="mintPrivateKey" placeholder="Tu clave privada">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" id="mintContractAddress" placeholder="Dirección del contrato dueño de los vinylmations">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" id="mintAddress" placeholder="Tu dirección pública">
    </div>
    <button class="btn btn-secondary" onclick="buyVinylmations()">RETIRAR VINYLMATION</button>
  </div>
  <br>

  <div class="jumbotron">
    <h1 class="display-4">Intercambia tus vinylmations</h1>
    <p class="lead">Si no te gustó tu vinylmation podés ponerte de acuerdo con otro usuario e intercambiarlos!</p>
    <hr class="my-4">
    <p>Condición de intercambio: haber comprado los vinylmations con el mismo contrato (dueño)</p>
    <p>Usuario 1</p>
    <div class="form-group">
      <input type="text" class="form-control" id="privateKeyToApproveV" placeholder="Clave privada usuario 1">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" id="tokenId" placeholder="Id del token a intercambiar">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" id="sendTo" placeholder="Dirección pública del usuario 2">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" id="vinylmationsContractAddr" placeholder="Dirección del contrato con el cual se compró el vinylmation">
    </div>
    <button class="btn btn-secondary" onclick="">INTERCAMBIAR</button>
    <br><br>
    <p>Usuario 2</p>
    <div class="form-group">
      <input type="text" class="form-control" id="privateKeyToApproveV" placeholder="Clave privada usuario 2">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" id="tokenId" placeholder="Id del token a intercambiar">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" id="sendTo" placeholder="Dirección pública del usuario 1">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" id="vinylmationsContractAddr" placeholder="Dirección del contrato con el cual se compró el vinylmation">
    </div>
    <button class="btn btn-secondary" onclick="">INTERCAMBIAR</button>
    <br><br>
    <p>Intercambio</p>
    <div class="form-group">
      <input type="text" class="form-control" id="exchangeAddr1" placeholder="Dirección pública usuario 1">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" id="exchangeToken1" placeholder="Id del token a intercambiar">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" id="exchangeAddr2" placeholder="Dirección pública usuario 2">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" id="exchangeToken2" placeholder="Id del token a intercambiar">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" id="exchangeContractAddr" placeholder="Dirección del contrato de intercambio">
    </div>
    <div class="form-group">
      <input type="text" class="form-control" id="gasWallet" placeholder="Clave privada para pagar gas">
    </div>
    <button class="btn btn-secondary" onclick="">CONCRETAR INTERCAMBIO</button>
  </div>
</body>

<script>

  function getFun() {
    var private_key = document.getElementById('getFunPrivateKey').value;
    fetch('http://localhost:3000/api/fun?key=' + private_key)
      .then(res => res.json())
      .then(console.log)
  }

  function buyVinylmations() {
    var private_key = document.getElementById('mintPrivateKey').value;
    var contract_address = document.getElementById('mintContractAddress').value;
    var address = document.getElementById('mintAddress').value;
    fetch('http://localhost:3000/api/vinylmations?address=' + address + '&contract_addr=' + contract_address + '&key=' + private_key)
      .then(res => res.json())
      .then(console.log)
  }

  function approveFun() {
    var private_key = document.getElementById('privateKeyToApprove').value;
    var address = document.getElementById('approveAddress').value;
    var amount = document.getElementById('amountToApprove').value;

    fetch('http://localhost:3000/api/fun?key=' + private_key + '&address=' + address + '&amount=' + amount,
      { method: 'POST'}
    )
      .then(res => res.json())
      .then(console.log)
  }


  function approveVinylmations() {
    var private_key = document.getElementById('privateKeyToApproveV').value;
    var sendTo = document.getElementById('sendTo').value;
    var token_id = document.getElementById('tokenId').value;
    var contract_address = document.getElementById('vinylmationsContractAddr').value;

    fetch('http://localhost:3000/api/vinylmations?sendTo=' + sendTo + '&key=' + private_key + '&tokenId=' + token_id + '&contract_addr=' + contract_address ,
      { method: 'POST'}
    )
      .then(res => res.json())
      .then(console.log)
  }

  function exchange() {
    var a1 = document.getElementById('exchangeAddr1').value;
    var t1 = document.getElementById('exchangeToken1').value;
    var a2 = document.getElementById('exchangeAddr2').value;
    var t2 = document.getElementById('exchangeToken2').value;
    var contract_addr = document.getElementById('exchangeContractAddr').value;
    var key = document.getElementById('gasWallet').value;

    fetch('http://localhost:3000/api/exchange?key=' + key + '&contract_addr=' + contract_addr + '&a1=' + a1 + '&t1=' + t1 + '&a2=' + a2 + '&t2=' + t2 ,
      { method: 'POST'}
    )
      .then(res => res.json())
      .then(console.log)
  }

</script>
</html>